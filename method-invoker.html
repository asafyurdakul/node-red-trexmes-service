

<script type="text/html" data-template-name="Method Invoker">
    <div class="form-row">
        <div class="form-row">
            <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
            <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
        </div> 

        <div class="form-row">
            <label for="node-input-service"><i class="fa fa-globe"></i> <span data-i18n="method-invoker.label.service"></span></label>
            <select type="text" id="node-input-service" style="width:70%;">
            </select>
        </div>
        <div class="form-row">
            <label for="node-input-method"><i class="fa fa-globe"></i> <span data-i18n="method-invoker.label.method"></span></label>
            <select type="text" id="node-input-method" style="width:70%;">
            </select>
        </div>

        <div class="form-row node-input-property-container-row">
            <ol id="node-input-property-container"></ol>
        </div>


    </div>   
</script>

<script type="text/javascript">
    (function() {
        
        function resizeDialog(size) {
            size = size || { height: $(".red-ui-tray-content form").height() }
            var rows = $("#dialog-form>div:not(.node-input-property-container-row):visible");
            var height = size.height;
            $("#node-input-property-container").editableList('height',height - 150);
        }

        function getProps(el) {
            var result = {
                props: []
            };
            el.each(function(i) {
                var prop = $(this);
                var p = {
                    p: prop.find(".node-input-prop-property-name").typedInput('value')
                };
                if (p.p) {
                    p.d = prop.find(".node-input-prop-property-description").typedInput('value');
                    p.dt = prop.find(".node-input-prop-property-description").typedInput('type');
                    result.props.push(p);
                }
            });
            return result;
        }
        
        
        RED.nodes.registerType('Method Invoker',{
            category: 'trexMes service',
            color:"rgb(204, 255, 204)",
            defaults: {
                name: {value:"",required:true},                
                props:{value:[]},
                data:{value:"", required:false},
                dataType:{value:"msg"},
                service: {value:""},
                method: {value:""},
            },
            inputs:1,
            outputs:1,
            icon: "trex.png",
            label: function() {
                if (this.name) {
                    return this.name;
                } else {
                    return "Method Invoker";
                }
            },
            labelStyle: function() {
                return this.name?"node_label_italic":"";
            },
            oneditprepare: function() { 
                var node = this;

                var eList = $('#node-input-property-container').css('min-height','250px').css('min-width','450px');
                eList.editableList({
                    addItem: function(container, i, opt) {
                        var prop = opt;
                        if (!prop.hasOwnProperty('p')) {
                            prop = { p: "", d: "", dt: "str" }; 
                        }
                        container.css({
                            overflow: 'hidden',
                            whiteSpace: 'nowrap'
                        });

                        var row = $('<div/>').appendTo(container);

                        var propertyName = $('<input/>', { class: "node-input-prop-property-name", type: "text" })
                            .css("width", "50%")
                            .appendTo(row)
                            .typedInput({ types: [{ label: 'Key', value: 'str' }] });

                        $('<div/>', { style: 'display:inline-block; padding:0px 6px;' })
                            .text(',')
                            .appendTo(row);

                        var propertyDescription = $('<input/>', { class: "node-input-prop-property-description", type: "text" })
                            .css("width", "calc(50% - 20px)")
                            .appendTo(row)
                            .typedInput({ types:['flow','global','str','num','bool','json','bin','date','jsonata','env','msg']});
                            
                        propertyName.typedInput('value', prop.p);
                        propertyDescription.typedInput('type', prop.dt || 'str');
                        propertyDescription.typedInput('value', prop.d);

                        resizeDialog();
                    },
                    removable: true,
                    sortable: true                                        
                });
     
                for (var i=0; i<node.props.length; i++) {
                    var prop = node.props[i];
                    var newProp = { p: prop.p, d:prop.d, dt:prop.dt };
                    eList.editableList('addItem',newProp);
                }

                var services = [
                    "IAnalysisExtensionService",
                    "IAnalysisViewService",
                    "IBarcodeExtensionService",
                    "IBarcodeViewService",
                    "ICapacityExtensionService",
                    "ICapacityViewService",
                    "IConsumptionExtensionService",
                    "IDatabasePrintService",
                    "IDateTimeService",
                    "IDefectExtensionService",
                    "IDefectViewService",
                    "IDepotExtensionService",
                    "IDocumentExtensionService",
                    "IDocumentViewService",
                    "IEmployeeExtensionService",
                    "IEmployeeViewService",
                    "IEnergyViewService",
                    "IEquipmentExtensionService",
                    "IForkliftExtensionService",
                    "IForkliftViewService",
                    "IFormControlPresenter",
                    "IFormulator",
                    "IIOCardExtensionService",
                    "IIOCardViewService",
                    "IIOSignalService",
                    "IJobOrderExtensionService",
                    "IJobOrderSerieExtensionService",
                    "ILabelExtensionService",
                    "ILabelPrintService",
                    "ILabelViewService",
                    "ILanguageService",
                    "ILineExtensionService",
                    "ILineViewService",
                    "ILocalizer",
                    "ILogService",
                    "ILotExtensionService",
                    "ILotViewService",
                    "IMaintenanceExtensionService",
                    "IMaintenanceViewService",
                    "IMainUIDataManager",
                    "IMemoryResolver",
                    "INgpContext",
                    "INotificationMessageViewService",
                    "IOpcSocketSignalService",
                    "IOperationExtensionService",
                    "IOutputService",
                    "IParameterService",
                    "IPokaYokeViewService",
                    "IPolyvalenceExtensionService",
                    "IPrintServiceProvider",
                    "IProcessDataExtensionService",
                    "IProductionExtensionService",
                    "IProductionPerformanceExtensionService",
                    "IProductionPlanExtensionService",
                    "IProductionPlanViewService",
                    "IProductionReceiptExtensionService",
                    "IProductionSectionExtensionService",
                    "IProductionSpecificationExtensionService",
                    "IProductionSpecificationViewService",
                    "IProductionViewService",
                    "IProductTreeExtensionService",
                    "IQualityExtensionService",
                    "IQualityViewService",
                    "IScaleService",
                    "IScaleViewService",
                    "ISerieReworkExtensionService",
                    "IShiftEventExtensionService",
                    "ISignalPortExtensionService",
                    "ISignalProcessExtensionService",
                    "ISmartAssemblyService",
                    "ISocketSender",
                    "ISqlDataContext",
                    "IStationSelectionUIDataManager",
                    "IStockCycleExtensionService",
                    "IStockExtensionService",
                    "IStockViewService",
                    "IStoppageExtensionService",
                    "IStoppageViewService",
                    "IVersionResolver",
                    "IWorkStationExtensionService",
                    "IWorkStationStatusExtensionService",
                    "IWorkStationStatusViewService"
                  ];
        
                // Her servise karşılık gelen metotlar (index sırasına göre gruplandı)
                var methods =[
                      [
                        "GetEmployeeAnalysesByTimePeriod",
                        "GetProductionAnalysesByTimePeriod",
                        "GetProductionStoppageAnalysesByTimePeriod",
                        "GetDefectAnalysesByTimePeriod",
                        "GetShiftDefectAnalyses",
                        "GetShiftOeeAnalyses",
                        "GetStoppageAnalysesByTimePeriod",
                        "GetShiftEmployeeAnalyses",
                        "CalculateShiftProductivity"
                      ],
                      [
                        "HandleProductivityAnalysisButtonInteraction",
                        "GetStoppageCountAnalysisViewModelsByTimePeriod",
                        "GetShiftEmployeeViewModels",
                        "GetDefectAnalysisViewModelsByTimePeriod"
                      ],
                      [
                        "LoadPlanViaJobOrderOrStockBarcode",
                        "LoadPlanViaProductionOrderBarcode",
                        "LoadPlanViaWorkorderSerieBarcode",
                        "ProcessKanbanBarcode",
                        "ProcessSerieBarcode",
                        "ProcessStockBarcode",
                        "ProcessJobOrderBarcode",
                        "ProcessStockBasedSerieBarcode"
                      ],
                      [
                        "CheckWebBarcodeQueue",
                        "LoadPlanViaJobOrderOrStockBarcode",
                        "LoadPlanViaProductionOrderBarcode",
                        "LoadPlanViaWorkorderSerieBarcode",
                        "ProcessBarcodeScan",
                        "ProcessStockBasedSerieBarcodeScan",
                        "NonCompleteProductionBarcode"
                      ],
                      [
                        "GetEstimatedPlanCompletionTime",
                        "GetCurrentCycle",
                        "GetCurrentRotationSpeed",
                        "GetCurrentSpeed",
                        "GetPlannedCycle",
                        "GetPlannedRotationSpeed",
                        "GetPlannedSpeed",
                        "GetTotalStockCoefficient"
                      ],
                      [
                        "GetCurrentAndPlannedCycleText",
                        "GetCurrentAndPlannedRotationSpeedText",
                        "GetCurrentCycleText",
                        "GetCurrentRotationSpeedText",
                        "GetCurrentSpeedText",
                        "GetPlannedCycleText",
                        "GetPlannedRotationSpeedText",
                        "GetPlannedSpeedText"
                      ],
                      [
                        "AnyPlanUseStockExists",
                        "DeletePlanUseStockByRefItemNo",
                        "UpdatePlanUseStockQuantity",
                        "GetMaterialsByPlanId",
                        "GetMaterialViews",
                        "GetMaterialViewsDueToCurrentConsumption",
                        "GetPlanConsumptionMaterials",
                        "GetPlanMaterialViews",
                        "CreatePlanUseStock",
                        "GetConsumptionSummaryByPlanReceiptId"
                      ],
                      [
                        "Print",
                        "IsLabelPrintEntryExistent",
                        "GetLabelPrintEntryById"
                      ],
                      [
                        "StartOfMonth",
                        "StartOfWeek",
                        "StartOfYear",
                        "GetServerSystemTime",
                        "GetCurrentDate",
                        "GetCurrentDateTime",
                        "GetCurrentDateTimeWithMilliSeconds",
                        "SetLocalTimeFromServerTime",
                        "IsFirstDateNewer",
                        "GetDateSqlFormat",
                        "GetCurrentDayOfWeek",
                        "GetCurrentWeekOfYear",
                        "GetDateTimeLocalizedMinute",
                        "GetDateTimeLocalizedSecond"
                      ],
                      [
                        "AnyDefectExistentForSerie",
                        "CreateDefectEntry",
                        "CreateDefectEntry",
                        "DeleteDefectEntry",
                        "GetDefectById",
                        "GetDefectByNo",
                        "GetDefectEntriesAmountExceptId",
                        "GetDefectEntriesBySerieId",
                        "GetDefectEntryAmount",
                        "GetDefectEntryAmount",
                        "GetDefectEntryAmountUnit2",
                        "GetDefectEntryAmountUnit2",
                        "GetDefectEntryAmountUnit3",
                        "GetDefectEntryAmountUnit3",
                        "GetDefectViewsBySerieId",
                        "GetMaterialDefectEntryAmount",
                        "GetMaterialDefectEntryAmountUnit2",
                        "GetMaterialDefectEntryAmountUnit3",
                        "GetSelectableDefects",
                        "GetSelectableDefectViews",
                        "GetSerialDefectEntryAmount",
                        "SetCurrentDefects",
                        "SetDefectDefinitions",
                        "SetDefectDefinitionDetails",
                        "UpdateDefectEntryByDefectReceiptId",
                        "UpdatePreDefinedDefectEntryReceiptId",
                        "GetCurrentDefectEntryViewsByLanguageId",
                        "UpdateDefectEntryStockIdAndDefectId",
                        "UpdateDefectEntryQuantitiesByDefectEntryEntity",
                        "CreateDefectEntryByDefectEntryEntity",
                        "GetDefectTypeById"
                      ],
                      [
                        "GetCurrentScrapAmountText",
                        "GetCurrentScrapAmountText",
                        "GetMaterialDefectEntriesByPlanReceiptId",
                        "HandleDefectButtonInteraction"
                      ],
                      [
                        "GetDepotById",
                        "GetDepotByNo"
                      ],
                      [
                        "GetJobOrderLinkedFilePaths",
                        "GetJobOrderLinkedFilePaths",
                        "GetStockLinkedFilePaths",
                        "GetStockLinkedFilePaths",
                        "GetStockPicturesByStockId"
                      ],
                      [
                        "HandleDocumentsButtonInteraction",
                        "ShowAndValidateDocumentsByConfiguration",
                        "ShowDocumentsByConfiguration",
                        "ShowAndValidateDocumentsByProductionPlan",
                        "ShowDocumentsByProductionPlan",
                        "ShowAndValidateDocumentsByStock",
                        "ShowDocumentsByStock",
                        "ShowAndValidateStockLinkedFiles",
                        "ShowStockLinkedFiles",
                        "ShowAndValidateStockLinkedFiles",
                        "ShowStockLinkedFiles",
                        "ShowAndValidateJobOrderLinkedFiles",
                        "ShowJobOrderLinkedFiles",
                        "ShowAndValidateJobOrderLinkedFiles",
                        "ShowJobOrderLinkedFiles"
                      ],
                      [
                        "ChangeEmployee",
                        "GetEmployeeByCardNo",
                        "GetEmployeeByEmployeeId",
                        "GetEmployeeByEmployeeNo",
                        "GetEmployeeByEmployeeNoOrCardNo",
                        "GetEmployeeByMaintenanceEmployeeId",
                        "GetEmployees",
                        "GetMaintenanceEmployeeByEmployeeId",
                        "GetMaintenanceEmployeeByEmployeeNo",
                        "GetMaintenanceEmployeeByMaintenanceEmployeeId",
                        "GetMaintenanceEmployeeIdByEmployeeId",
                        "IsEmployeeLoggedInAnotherPanel",
                        "IsEmployeeLoggedInAnotherStation",
                        "IsEmployeePasswordValid",
                        "IsEmployeePasswordValid",
                        "LoginEmployee",
                        "LogoutEmployee",
                        "SetCurrentTeam",
                        "SetEmployeeDefinitions"
                      ],
                      [
                        "GetEmployeeApproval",
                        "GetEmployeeApprovalToStartStoppage",
                        "GetEmployeeApprovalToEndStoppage",
                        "GetShiftChiefApproval",
                        "HandleEmployeeOperationsButtonInteraction",
                        "HandleNotifyEmployeeButtonInteraction",
                        "ValidateEmployee"
                      ],
                      [
                        "HandleEnergyButtonInteraction"
                      ],
                      [
                        "GetAvailableEquipments",
                        "GetEquipmentById",
                        "GetEquipmentByIdAndType",
                        "GetEquipmentByNo",
                        "GetEquipmentByNoAndType",
                        "GetEquipmentIdByNo",
                        "GetEquipmentIdByNoAndType",
                        "GetEquipmentIdByWorkStationId",
                        "GetEquipmentsByWorkStationId",
                        "GetEquipmentsByWorkStationIdAndType",
                        "UpdateEquipment"
                      ],
                      [
                        "ApproveForkliftOrdersCompletion",
                        "CreateForkliftOrder",
                        "CreateForkliftOrderDetail",
                        "DeleteForkliftStock",
                        "GenerateForkliftOrderId",
                        "IsForkliftOrderAccepted",
                        "IsForkliftOrderConfirmed",
                        "IsForkliftOrderCreated",
                        "UpdateForkliftOrder",
                        "GetForkliftStockTransfer"
                      ],
                      [
                        "GetForkliftStockViewModels",
                        "HandleForkliftButtonInteraction"
                      ],
                      [
                        "SetActiveForm",
                        "FormShowDialog",
                        "SetFormSize",
                        "SetIsDynamicFontSizeActive",
                        "SetControlSize",
                        "SetNumericKeyboard",
                        "HideNumericKeyboard",
                        "SetGridKeyboard",
                        "SetActiveGridKeyboardComponent",
                        "HideGridKeyboards",
                        "HideGridKeyboard",
                        "SetGridNumericKeyboard",
                        "HideGridNumericKeyboard",
                        "SetKeyboard",
                        "SetActiveKeyboardComponent",
                        "HideKeyboard",
                        "SetKeypad",
                        "SetKeypad",
                        "SetActiveKeypadComponent",
                        "HideKeypad",
                        "IsKeypadActive",
                        "IsKeyBoardActive",
                        "SendEnterKey",
                        "SetButtonSettings",
                        "FormHide",
                        "FormClose",
                        "GetSplashForm",
                        "GetUserInput",
                        "GetUserApproval",
                        "GetUserInputWithApproval",
                        "GetUserStartEndInputWithApproval",
                        "ShowUserWarning",
                        "ShowUserInfo",
                        "SetFontSize",
                        "SetFontSize",
                        "ShowUserMessage",
                        "ShowUserMessage",
                        "HideMessage",
                        "HideMessage",
                        "HideMessage",
                        "SetTextValue",
                        "GetScreenWidth",
                        "GetScreenHeight",
                        "ComboDoldur",
                        "GetUserButtonSelection",
                        "GetUserSelection",
                        "FocusOnControl",
                        "GetUserSelectableSelection",
                        "HideControl",
                        "RefreshControl",
                        "ShowControl"
                      ],
                      [
                        "IsCycleUnitPiece",
                        "IsCycleUnitMeter",
                        "GetSpeedTimeMultiplier",
                        "GetCycleUnitName",
                        "GetCycleUnitTimeName"
                      ],
                      [
                        "GetIOCardCommands",
                        "LogIOCardData"
                      ],
                      [
                        "HandleIOCardInformationButtonInteraction"
                      ],
                      [
                        "ResetDefectInputSignals",
                        "ResetCounterInputSignals",
                        "SetCounterPortValues",
                        "IsWorkStationWorkingDueToWorkingSignalCheck",
                        "SetInputSignalValuesOnProductionConfirmation",
                        "GetOpcIsWorkingSignalStatus",
                        "GetOpcIsWorkingSignalValue",
                        "AnyStoppageSignalActive",
                        "GetStoppageSignalStatus"
                      ],
                      [
                        "GetJobOrderById",
                        "GetJobOrderByNo",
                        "GetJobOrderIdByJobOrderNo",
                        "GetJobOrderInfoById",
                        "GetJobOrderMaterialByItemNo",
                        "GetJobOrderMaterialByStockId",
                        "GetJobOrderMaterials",
                        "GetJobOrderMaterials",
                        "GetJobOrderMaterialsByProductTree",
                        "GetJobOrderMaterialViews",
                        "GetJobOrderMaterialViews",
                        "GetJobOrderMaterialViewsDueToCurrentConsumption",
                        "GetJobOrderMaterialViewsDueToCurrentConsumption",
                        "GetJobOrderNoByJobOrderId",
                        "GetJobOrderPokaYokeDefinitions",
                        "GetJobOrderPokaYokeItemDefinitionsByJobOrderId",
                        "GetJobOrderPokaYokeMaterials",
                        "GetJobOrdersByGroupNo",
                        "GetJobOrdersByProductionOrderNo",
                        "GetJobOrderTraceableMaterials",
                        "GetJobOrderTraceableMaterials",
                        "GetJobOrderTreeUnitQuantity",
                        "GetJobOrderViewById",
                        "GetNextOperationJobOrder",
                        "GetPreviousOperationJobOrder",
                        "GetProducibleSubJobOrders",
                        "GetProductionScrapAmountByJobOrderId",
                        "GetProductionSummaryByJobOrderId",
                        "IsJobOrderActive",
                        "IsJobOrderExistent",
                        "UpdateJobOrderEquipment",
                        "UpdateJobOrderMaterial",
                        "UpdateJobOrderStatus",
                        "UpdateJobOrderAmountAndStatus"
                      ],
                      [
                        "CreateJobOrderSerie",
                        "DeleteJobOrderSerie",
                        "GetLastProductSerie",
                        "GetSerieById",
                        "GetSerieByIdAndWorkStation",
                        "GetSerieByNo",
                        "GetSerieByNoAndWorkStation",
                        "IsSerieUnique",
                        "IsSerieScannedOnTime",
                        "SetLastSerieScanTime"
                      ],
                      [
                        "GetLabelNoByReceiptType",
                        "GetLabelNoToPrintEachCounter",
                        "GetLabelPrintByNo",
                        "GetMaxReprintableLabelCount",
                        "GetPlanInfoLabelNo",
                        "GetProductionReceiptInterSectionLabelNo",
                        "GetProductionReceiptLabelNo",
                        "GetProductionReceiptLabelNo",
                        "GetProductionReceiptSectionLabelNo",
                        "GetReprintDayCondition",
                        "GetScrapLabelNo",
                        "GetStationConfiguration",
                        "IsLabelValidToPrintByPrintCount",
                        "IsOnlyShiftChiefCanReprintEnabled",
                        "SetStationLabelConfiguration",
                        "SetStockLabelConfigurations"
                      ],
                      [
                        "PrintProductionReceiptLabel",
                        "PrintProductionReceiptLabel",
                        "PrintProductionReceiptSectionLabel",
                        "PrintProductionReceiptInterSectionLabel",
                        "PrintDefectLabel",
                        "PrintCounterLabel",
                        "PrintPlanInfoLabel"
                      ],
                      [
                        "HandlePrintPlanInformationButtonInteraction",
                        "HandleRePrintReceiptButtonInteraction"
                      ],
                      [
                        "SetCurrentLanguage",
                        "GetTranslationByMessage",
                        "GetTranslationByComponent",
                        "GetTranslationsByLanguageCode",
                        "GetCardNameLangDesc",
                        "GetCardNameLangSql",
                        "GetCustomTranslationsByLanguageCode",
                        "CreateCustomTranslation",
                        "GetNgpLanguageCustomEntity",
                        "GetNgpLanguageEntity",
                        "GetCustomButtonTranslations",
                        "AddTranslation",
                        "GetLanguageCode"
                      ],
                      [
                        "DeleteLineStopStatus",
                        "GetBackStationIds",
                        "GetNextStationIds",
                        "GetDeviceLineWorkStation",
                        "GetLinePlanStates"
                      ],
                      [
                        "SelectLine",
                        "ShowLineSelection"
                      ],
                      [
                        "SetLanguage",
                        "LocalizeResourceCollection",
                        "LocalizeAllComponents",
                        "LocalizeFormComponents",
                        "SetAlphabetCode",
                        "GetAlphabet",
                        "SetControlEnability"
                      ],
                      [
                        "WriteLog",
                        "WriteLog",
                        "WriteError",
                        "WriteError",
                        "Info",
                        "Warning",
                        "LogCallStart",
                        "LogCallEnd",
                        "LogSkipMethod",
                        "Debug",
                        "Error",
                        "Error",
                        "Exception",
                        "Fatal",
                        "Fatal"
                      ],
                      [
                        "DeleteLotEntryByItemNo",
                        "CreateLotEntry",
                        "CreateStockLot",
                        "CheckLotSummary",
                        "DeleteLotEntry",
                        "DeleteLotEntriesByWorkStationId",
                        "DeleteLotEntriesByWorkStationIdAndJobOrders",
                        "DeletePlanLotsByPlanReceiptId",
                        "IsEachLotBalanceValid",
                        "GeneratePlanLotsFromLotEntriesByActualConsumption",
                        "GeneratePlanLotsFromLotEntriesByActualConsumption",
                        "GetAvailableLots",
                        "GetLotEntryByWorkStationIdAndLotNo",
                        "GetLotEntriesByWorkStationIdAndJobOrderId",
                        "GetLotEntriesByWorkStationIdAndJobOrderIdAndItemNo",
                        "GetLotEntriesByWorkStationId",
                        "GetLotSummary",
                        "GetStockLotByLotNo",
                        "GetStockLotByStockLotId",
                        "IsLotEntryExistent",
                        "IsLotEntryExistent",
                        "IsLotEntryExistent",
                        "IsLotSelectedForAllTraceableMaterials",
                        "IsStockLotExistent",
                        "ProcessMaterialLotSelection",
                        "SetConsumptionLots",
                        "UpdateLotEntryAmounts",
                        "UpdateLotEntryAmountsByWorkStationId",
                        "UpdateLotEntryExitAmount",
                        "UpdatePreDefinedPlanLotsReceiptId",
                        "UpdateStockLot",
                        "UpdateStockLotStockId",
                        "GetTotalLotAmountByWorkStationId",
                        "ReGenerateAllConsumptionAndLotEntries",
                        "ResolveMaterialSummaryAsMaterialModel",
                        "SetMaterialConsumptionOutputsDueToOtherStationsProduction",
                        "SetMaterialConsumptionOutputs",
                        "RefreshLotEntries",
                        "DeleteConsumedLotEntries"
                      ],
                      [
                        "HandleMaterialButtonInteraction"
                      ],
                      [
                        "CompleteMaintenanceOrder",
                        "CreateMaintenanceOrder",
                        "GetActiveMaintenanceOrdersByEquipmentId",
                        "GetMaintenanceDirectionById",
                        "GetMaintenanceDirections",
                        "GetMaintenanceOrderById",
                        "GetMaintenancePlanById",
                        "GetMaintenanceServiceItems",
                        "GetMaintenanceStocks",
                        "GetMaintenanceTypeById",
                        "GetMaintenanceUnitByEquipmentId",
                        "GetMaintenanceUnitByUnitId",
                        "GetMaintenanceUnitByWorkStationId",
                        "GetMaintenanceUnitsByWorkStationId",
                        "GetMalfunctionCauseById",
                        "GetMalfunctionCausesByWorkStationId",
                        "SetMaintenancePlanConfiguration",
                        "SetMaintenanceTypeDefinitions",
                        "UpdateMaintenanceOrderDirectionId",
                        "UpdateMaintenanceOrderMalfunctionCauseId",
                        "UpdateMaintenanceOrderPlanId",
                        "UpdateMaintenanceOrderUnitId",
                        "UpdateMaintenanceTypeId",
                        "UpdateCurrentOrderDescriptionAndNote",
                        "GenerateAndCreateMaintenanceOrder",
                        "SetCurrentMaintenanceEmployee",
                        "IsMaintenanceTypeRequirementsSatisfied",
                        "CheckMaintenanceOrderFieldRequirements"
                      ],
                      [
                        "CheckPeriodicalMaintenance",
                        "IsEmployeeAuthorizedToStartStoppage",
                        "HandleMaintenanceButtonInteraction",
                        "HandleCompleteMaintenanceButtonInteraction",
                        "IsEmployeeAuthorizedToOperateStoppage",
                        "SetEmployeeForMaintenanceStoppageIfAuthorized",
                        "ShowMaintenanceDirectionPictures",
                        "ShowMaintenanceDirectionVideos",
                        "ShowMaintenanceDirectionSteps",
                        "ShowMaintenanceDirectionSteps"
                      ],
                      [
                        "SetConfiguration",
                        "SetConfiguration",
                        "AddUIData",
                        "ReplaceUIData",
                        "RemoveUIData",
                        "IfContainsDisplayIndex",
                        "GetDataTypeByDisplayIndex",
                        "GetUIDataByDisplayIndex"
                      ],
                      [
                        "GetAvailableMemory"
                      ],
                      [
                        "GetStationIndex",
                        "GetStationIndex",
                        "SetTransientProductionContext"
                      ],
                      [
                        "HandleMessagesButtonInteraction"
                      ],
                      [
                        "InitializeSignalProcessManager",
                        "StopProcess",
                        "StartProcess",
                        "InterpretSocketMessage",
                        "InitializeSocketListener",
                        "EnqueueSignalOperation"
                      ],
                      [
                        "GetOperationById"
                      ],
                      [
                        "ActivateOutputForCounterIncrement",
                        "CheckAllOutputStates",
                        "CheckOutputsOnProductionStart",
                        "CheckOutputsOnProductionEnd",
                        "SetDigitalOutputValue"
                      ],
                      [
                        "GetSystemConfiguration",
                        "GetNgpConfiguration"
                      ],
                      [
                        "ProcessPokaYokeResult"
                      ],
                      [
                        "IsEmployeeQualifiedForProductionPlan",
                        "IsEmployeeQualifiedForStock",
                        "IsEmployeeQualifiedForStoppageCause",
                        "IsEmployeeQualifiedForWorkStation",
                        "IsTeamQualifiedForProductionPlan",
                        "IsTeamQualifiedForStock",
                        "IsTeamQualifiedForStoppageCause",
                        "IsTeamQualifiedForWorkStation"
                      ],
                      [
                        "PrintLabel"
                      ],
                      [
                        "SetPlcOnProductionStart",
                        "SetPlcOnCoefficientChange",
                        "SetPlcOnProductionEnd",
                        "SetPlcOnStoppageStart",
                        "SetPlcOnStoppageEnd",
                        "ResetProcessData",
                        "SetMinMaxExpectedValue",
                        "GetSelectableOpcProcessDataDefinitions"
                      ],
                      [
                        "GetNextProductionPlanId",
                        "IncreaseCounterByStockIndex",
                        "IncreaseCounterByStockNo",
                        "IsPlanStartAllowed",
                        "IsProductionConfirmationAllowed",
                        "IsConfirmingProduction",
                        "LoadPlanStartProduction",
                        "LoadProductionPlanByJobOrderId",
                        "LoadProductionPlanByStockId",
                        "ConfirmAndCreateSectionReceipt",
                        "ConfirmAndCreateInterSectionReceipt",
                        "SetPlanDetails",
                        "SetProductionSummary",
                        "GetLastProductionReceiptRecordTime",
                        "LoadNextProductionPlan",
                        "IsAnyStationConfirmingProduction",
                        "ConfirmProduction",
                        "LoadPlanStartProduction",
                        "EndProduction"
                      ],
                      [
                        "GetProductionPerformance"
                      ],
                      [
                        "ClearAndDeleteNextPidList",
                        "AddNextProductionPlan",
                        "CreateProductionPlan",
                        "CreateProductionPlanFromJobOrder",
                        "CreateProductionPlanFromJobOrders",
                        "CreateProductionPlanFromJobOrders",
                        "CreateProductionPlanItem",
                        "DeleteNextProductionPlan",
                        "GetFirstProductionPlanByStockIdExceptCurrentPlan",
                        "GetJobOrderIdsByPlanId",
                        "GetJobOrderPokaYokeDefinitionsByPlanId",
                        "GetNextProductionPlanModelByPlanId",
                        "GetNextProductionPlans",
                        "GetPlanCountByJobOrderId",
                        "GetProductionPlanById",
                        "GetProductionPlanEquipment",
                        "GetProductionPlanEquipmentId",
                        "GetRequiredEmployeeCountByPlanId",
                        "IsPlanCapacityConvenient",
                        "IsProductionPlanActive",
                        "IsProductionPlanExistent",
                        "SetProductionInformation",
                        "SetProductionInformationForAllStations",
                        "SetProductionPlanStatus",
                        "SetWorkEndDateByPlanId",
                        "SetWorkStartDateByPlanId",
                        "UpdatePlanCapacityAndSpeed",
                        "UpdatePlanCyclePeriod",
                        "UpdatePlanItemCoefficient",
                        "UpdatePlanItemCyclePeriod",
                        "UpdatePlanItemCyclePeriod",
                        "UpdateProductionPlanEquipmentId",
                        "UpdateProductionPlanNote",
                        "UpdateProductionPlanCoePulse",
                        "GetPlanIdByJobOrderId",
                        "SetProductionPlanStatusByProductionAmount",
                        "GenerateProductionPlanId",
                        "GetParentPlanId",
                        "GetProductionPlanItemsById",
                        "GenerateProductionPlanQuery",
                        "ChangeOrderNextPidList",
                        "CreateNextProductionPlan",
                        "UpdatePlanAmountAndStatus",
                        "SetProductionPlanStatusOnProductionConfirmation",
                        "GetLoadableProductionPlanInfosWithPlanItem"
                      ],
                      [
                        "HandlePlanInformationButtonInteraction",
                        "HandleNextPlanSelectionButtonInteraction",
                        "HandleChangeStockUnitCoeButtonInteraction",
                        "HandleProductionParametersButtonInteraction",
                        "SelectNextProductionPlans",
                        "ShowPlanSelection"
                      ],
                      [
                        "CreateProductionReceipt",
                        "CreateReceiptProductionDefect",
                        "DeleteReceiptProductionDefect",
                        "GetLastProductionReceiptIdByWorkStationId",
                        "GetTotalPlanStockProduction",
                        "GetTotalProductionDefectAmountByPlanIdAndWorkStationId",
                        "GetTotalProductionDefectAmountByPlanId",
                        "GetProductionReceiptBriefByPlanId",
                        "GetProductionReceiptBriefByPlanIdAndStockId",
                        "GetProductionReceiptBriefByPlanIdAndWorkStationId",
                        "GetProductionReceiptBriefByPlanIdAndStockIdAndWorkStationIds",
                        "GetProductionReceiptById",
                        "GetProductionReceiptByNo",
                        "GetProductionSubReceiptBriefByPlanId",
                        "GetTotalProductionDefectAmountByReceiptId",
                        "IsProductionReceiptExistent",
                        "SetProductionAmountByPlanId",
                        "SetReceiptLabelPrintCount",
                        "UpdateReceiptProductionDefect",
                        "UpdateProductionReceiptQuantity",
                        "UpdateProductionReceiptIntegrationStatus",
                        "GetProductionReceiptUserDefinedFields",
                        "GetProductionReceiptUserDefinedFieldOptions",
                        "IntegrateProductionReceipt",
                        "GetProductionReceiptUserDefinedDataHistory"
                      ],
                      [
                        "CreateProductionSectionEntry",
                        "GetDefinableUndefinedStoppages",
                        "GenerateProductionSectionDefectEntry",
                        "GenerateProductionSectionEntry",
                        "CreateProductionSectionDefectEntry",
                        "GetProductionSectionEntries",
                        "GetLastPlanIdExceptCurrentPlan",
                        "GetTotalProductionSectionStopDuration",
                        "UpdateProductionSectionEntriesDueToPlanReceipt"
                      ],
                      [
                        "AnyUnSatisfiedRequirementExists",
                        "GetProductionSpecificationResultsByGroupItemNo",
                        "GetProductionSpecificationInstructions",
                        "GetProductionSpecificationInstructionsAsDataTable",
                        "GetProductionSpecificationResults",
                        "GetSpecificationNameByInstructionId",
                        "GetExpectedSpecificationValues",
                        "SetProductionSpecificationResults",
                        "GetExpectedSpecificationValues"
                      ],
                      [
                        "HandleProductionSpecButtonInteraction",
                        "ShowSpecificationGroupSelection",
                        "ShowProductionSpecifications"
                      ],
                      [
                        "ChangePlanStartProduction",
                        "CheckIfPlanCompleted",
                        "CheckIfShiftChangeTimeHasCome",
                        "CheckNgpCommands",
                        "CheckReceivedMessages",
                        "GenerateProductionStockViewModels",
                        "GetExpectedFinishTimeValueText",
                        "HandleCurrentPlanChangeButtonInteraction",
                        "HandleOtherOperationsButtonInteraction",
                        "HandleProductionButtonInteraction",
                        "ShowJobSelection",
                        "ShowStockEquipmentMatch",
                        "IsUserDefinedFieldTypeMatching"
                      ],
                      [
                        "GetProductAssemblyOrders",
                        "CreateAssemblyHistoryEntry"
                      ],
                      [
                        "CreateUserDefinedQualityReceipt",
                        "CreateInitialApprovalReceipt",
                        "CreateInitialApprovalReceipt",
                        "GetLastInitialApprovalReceiptResult",
                        "GetTechnicalControlDefinitions"
                      ],
                      [
                        "HandleQualityControlButtonInteraction"
                      ],
                      [
                        "SetScalePorts",
                        "IsSharedScaleUsageEnabled",
                        "GetScaleMeasurements",
                        "SetScaleMeasurements",
                        "SetScaleMeasurement",
                        "GetScaleSerialPortData",
                        "GetScalePortCount",
                        "SetProductionCounterFromScaleWeight",
                        "ResetScaleMeasurements",
                        "InitializeScalePortConfiguration"
                      ],
                      [
                        "SetScaleDataViaScaleSelection"
                      ],
                      [
                        "CreateSerieReworkEntry",
                        "CreateSerieReworkEntryDetail",
                        "GetSerieReworkEntryBySerieId",
                        "GetSerieReworkEntryDetailsBySerieId",
                        "GetSerieReworkViewBySerieId",
                        "UpdateSerieReworkEntry",
                        "UpdateSerieReworkEntryDetail"
                      ],
                      [
                        "CreateShiftEvent",
                        "GetShiftEvents",
                        "GetShiftEventTypes"
                      ],
                      [
                        "GetDigitalInputValues",
                        "GetCounterPort",
                        "GetDefectSignalPort",
                        "GetEquipmentStockIndexPorts"
                      ],
                      [
                        "IncreaseCounterBySignalPort",
                        "StartUndefinedStoppage",
                        "StartStoppageIfAnyStoppageSignalActive"
                      ],
                      [
                        "StartSAS",
                        "IsModuleInitialized",
                        "IsStationInitialized",
                        "InitializeAssemblyService",
                        "InitializeAssemblyWorkStation",
                        "ProcessDigitalInputChange",
                        "ProcessDigitalOutputChange",
                        "ProcessBarcode",
                        "ProcessBarcodeByBrainType",
                        "IsCounterIncrementConvenient",
                        "SetActiveStationBrain",
                        "IncreaseDefectCounterDueToSAS",
                        "IsToSubstringBarcode"
                      ],
                      [
                        "Initialize",
                        "Send"
                      ],
                      [
                        "add_OnDisconnected",
                        "remove_OnDisconnected",
                        "add_OnReconnected",
                        "remove_OnReconnected",
                        "TryToConnect",
                        "SetSqlConfiguration",
                        "SetClientConfiguration",
                        "GetDataTable",
                        "GetDataTableWithParameters",
                        "RunCommand",
                        "RunCommandWithParameters",
                        "UpdateTable",
                        "InsertTable",
                        "UpdateOrInsertTable",
                        "AddParameter",
                        "AddParameter",
                        "IsDataExistent",
                        "IsDataExistent",
                        "GetTableMaxValue",
                        "GetTableMaxValueWithCondition",
                        "SetDefaultParameterValues",
                        "InsertTableFromDataTable",
                        "IsTableExistent",
                        "IsSqlObjectExistent",
                        "IsColumnExistent"
                      ],
                      [
                        "SetConfiguration",
                        "SetConfiguration",
                        "AddUIData",
                        "ReplaceUIData",
                        "RemoveUIData",
                        "SetDefaultConfiguration",
                        "IfContainsDisplayIndex",
                        "GetDataTypeByDisplayIndex",
                        "GetUIDataByDisplayIndex"
                      ],
                      [
                        "GetPlanCapacity",
                        "GetPlanCyclePeriod",
                        "GetPlanStockCoefficient",
                        "GetWorkStationPlanCycle",
                        "GetWorkStationStockCycle",
                        "IsWorkStationPlanCycleExistent",
                        "IsWorkStationStockCycleExistent",
                        "SetCyclePeriod",
                        "SetWorkStationPlanCycleFromStockCycle",
                        "SetWorkStationPlanCycle",
                        "UpdateWorkStationPlanCycleCapacity",
                        "UpdateWorkStationPlanCycleCoefficient",
                        "UpdateWorkStationPlanCyclePeriod"
                      ],
                      [
                        "CreateStock",
                        "GetAlternateStockViewsByStockId",
                        "GetStockByCustomerStockNo",
                        "GetStockById",
                        "GetStockDetailById",
                        "GetStockDetailByNo",
                        "GetStockBySupplierStockNo",
                        "GetStockByCaseSensitiveNo",
                        "GetStockGradeById",
                        "GetStockUnitName",
                        "GetStockUnitsByStockId",
                        "GetUnitByUnitId",
                        "IsAlternateStock",
                        "IsStockExistent",
                        "IsStockExistent",
                        "IsMultiLotFollowableStock"
                      ],
                      [
                        "GetStockIndexSelection"
                      ],
                      [
                        "EndStoppageDueToSystemInteraction",
                        "GetEstimatedStoppageDuration",
                        "GetSelectableStoppageCauses",
                        "GetStoppageCauseById",
                        "GetStoppageCauseDetails",
                        "GetStoppageCauseIdByNo",
                        "GetStoppageCauses",
                        "GetStoppageCauseDefectId",
                        "GetStoppageCauseStationDetail",
                        "GetStoppageCauseStockDetail",
                        "IsStoppageCausePlanned",
                        "IsStoppageCauseSystemStoppage",
                        "IsCurrentStoppageNoShiftStoppage",
                        "SetWorkStationStatus",
                        "SetWorkStationStatus",
                        "SetWorkStationStatus",
                        "SetWorkStationStatus",
                        "SetStoppageCauseDefinitionDetails",
                        "SetStoppageCauseDefinitions",
                        "LogStoppageEvent",
                        "GetDefinableSignalStoppageIds"
                      ],
                      [
                        "ChangeDefinedStoppages",
                        "DefineUndefinedStoppages",
                        "EndStoppageDueToOperatorInteraction",
                        "HandleStoppageButtonInteraction",
                        "HandleStoppageChangeButtonInteraction",
                        "HandleTestModeButtonInteraction",
                        "GetStoppageDescription"
                      ],
                      [
                        "GetVersion",
                        "GetVersionDate",
                        "GetFormattedVersion"
                      ],
                      [
                        "GetWorkStationById",
                        "GetAllWorkStations",
                        "GetWorkStationsByWorkcenterId",
                        "UpdateStationEquipment"
                      ],
                      [
                        "GetInputCounterStatusEntries",
                        "GetMaterialItemStatusEntries",
                        "GetMaterialStatusEntries",
                        "GetStationStatusSummary",
                        "GetStatusUpdateCounter",
                        "GetCurrentPanelStationStatusEntriesByJobOrderId",
                        "GetWorkStationEnergyStatusEntries",
                        "GetWorkStationOtherStatusEntry",
                        "GetWorkStationStatusEntry",
                        "GetWorkStationStatusEntryDetail",
                        "GetWorkStationStatusItemEntries",
                        "IfPlanIsWorkingAtAnotherStation",
                        "SetStationStatusSummary",
                        "GetCurrentWorkStationPlansByLineIds"
                      ],
                      [
                        "GetProducibleQuantityText"
                      ]
                    ];
                      
                var serviceSelect = document.getElementById("node-input-service");
                var methodSelect = document.getElementById("node-input-method");
                
                // Servis seçeneklerini ekle
                services.forEach(function(service) {
                    var opt = document.createElement("option");
                    opt.value = service;
                    opt.innerHTML = service;
                    serviceSelect.appendChild(opt);
                });
        
                // Metotları güncelleme fonksiyonu
                function updateMethods() {
                    var selectedIndex = serviceSelect.selectedIndex;
                    methodSelect.innerHTML = ""; // Önceki seçenekleri temizle
                    
                    if (selectedIndex >= 0 && selectedIndex < methods.length) {
                        methods[selectedIndex].forEach(function(method) {
                            var opt = document.createElement("option");
                            opt.value = method;
                            opt.innerHTML = method;
                            methodSelect.appendChild(opt);
                        });
                    }
                }
        
                updateMethods(); // İlk açılışta servise göre methodları güncelle
        
        
                // Servis seçimi değiştiğinde metot listesini güncelle
                serviceSelect.addEventListener("change", updateMethods);

                // İlk açılışta, eğer önceden bir servis seçiliyse metotları güncelle
                if (node.service) {
                    serviceSelect.value = node.service;
                    updateMethods();
                    if (node.method) {
                        methodSelect.value = node.method;
                    }
                }
            },
            oneditsave: function() {
                var items = $("#node-input-property-container").editableList('items');
                var result = getProps(items);
                this.props = result.props;

                var serviceSelect = document.getElementById("node-input-service");
                var methodSelect = document.getElementById("node-input-method");

                this.service = serviceSelect.value;
                this.method = methodSelect.value;

            },
            oneditresize: resizeDialog
    
        });
    
       
    
    })();
    </script>